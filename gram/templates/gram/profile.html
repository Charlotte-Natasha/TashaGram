{% extends 'base.html' %}
{% load static %}

{% block content %}

{% for post in posts %}

<div class="card mt-2">
    <div class="card-header">
        <strong>@{{post.author.username}}</strong>
    </div>
    {% if post.image %}
    <div class="card-image">
        <img src="{{post.image.url}}" alt=""> 
    </div>
    {% endif %}
    <div class="card-body d-flex flex-row justify-content-between">
        <div>
            <h5 class="card-title">{{post.caption}}</h5>
            <p>{{post.description}}</p>
        </div>
        <form action="dislike" method="POST">
            {% csrf_token %}
            <input type="text" name="image" value="{{x.id}}" style="display: none;">
            <button type="submit" class="btn btn-danger">Like</button>
        </form>
        <form action="dislike" method="POST">
            {% csrf_token %}
            <input type="text" name="image" value="{{x.id}}" style="display: none;">
            <button type="submit" class="btn btn-danger">Dislike</button>
        </form>
        <div>
            {% if user == post.author %}
            <form method="POST">
                {% csrf_token %}
                <button type="submit"  class="btn btn-danger" name="post-id" value="{{post.id}}">Delete</button>
            </form>
            {% endif %}
            
        </div>
    </div>
    <div class="card-footer text-muted">
        {{post.created_at}}
    </div>
    
</div>

{% empty %}
<p>No posts yet..</p>
{% endfor %}

{% endblock %}